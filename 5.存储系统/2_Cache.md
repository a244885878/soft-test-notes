### Cache

- 在计算机的存储系统体系中，Cache 是访问速度最快的层次(若有寄存器，则寄存器最快)
- 使用 Cache 改善系统性能的依据是程序的局部性原理

  - 时间局部性
  - 空间局部性

- 三级存储体系
  - Cache
  - 主存
  - 辅存

### Cache-概念

如果以 h 代表对 Cache 的访问命中率，t₁ 表示 Cache 的周期时间，t₂ 表示主存储器周期时间，以读操作为例，使用“Cache + 主存储器”的系统的平均周期为 t₃，则：

$$
t₃ = h \times t₁ + (1 - h) \times t₂
$$

其中，(1 - h) 又称为失效率（未命中率）。

- 直接相联映像：`硬件电路`较简单、但`冲突率很高`
- 全相联映像：电路难于设计和实现，只适用于小容量的 cache，`冲突率较低`
- 组相联映像：直接相联与全相联的`折中`
- 注：主存与 Cache 之间的地址映射由硬件直接完成

### Cache-映像

- 地址映像是将主存与 Cache 的存储空间划分为若干大小相同的页(或称为块)
  - 例如：某机的主存容量为 1GB，划分为 2048 页，每页 512KB；Cache 容量为 8MB，划分为 16 页，每页 512KB。

### 总结

|   映像方式   | 冲突率 (高、中、低) | 电路复杂度 (复杂、简单、折中) |
| :----------: | :-----------------: | :---------------------------: |
| 直接相联映像 |         高          |             简单              |
|  全相联映像  |         低          |             复杂              |
|  组相联映像  |         中          |             折中              |

## 真题

#### 1. 以下关于 Cache(高速缓冲存储器)的叙述中，不正确的是（）

- A、Cache 的设置扩大了主存的容量
- B、Cache 的内容是主存部分内容的拷贝
- C、Cache 的命中率并不随其容量增大线性的提高
- D、Cache 位于主存与 cpu 之间

> 答案： A

#### 2. 在程序执行过程中，高速缓存(Cache)与主存间的地址映像由（）

- A、操作系统进行管理
- B、存储管理软件进行管理
- C、程序员自行安排
- D、硬件自动完成

> 答案：D

#### 3. 主存与 Cache 的地址映射方式中，（）方式可以实现主存`任意`一块装入 Cache 中任意位置，只有装满才需要替换

- A、全相联（可以任意映射）
- B、直接映射（不能直接映射）
- C、组相联（混合）
- D、串并联

> 答案：A
